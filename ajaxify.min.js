class Ajaxify{constructor(options){String.prototype.iO=function(s){return this.toString().indexOf(s)+1};let $=this;$.s={elements:"body",selector:"a:not(.no-ajaxy)",selectorskip:"",forms:"form:not(.no-ajaxy)",canonical:false,refresh:false,requestDelay:0,scrolltop:"s",bodyClasses:false,deltas:true,asyncdef:true,alwayshints:false,inline:true,inlinesync:true,inlinehints:false,inlineskip:"adsbygoogle",inlineappend:true,style:true,prefetchoff:false,verbosity:0,memoryoff:false,cb:0,beforeRender:false,afterRender:false,pluginon:true,passCount:false,};$.pass=0;$.currentURL="";$.parse=(s,pl)=>((pl=document.createElement("div")),pl.insertAdjacentHTML("afterbegin",s),pl.firstElementChild);$.trigger=(t,e)=>{let ev=document.createEvent("HTMLEvents");ev.initEvent("pronto."+t,true,false);ev.data=e?e:$.Rq("e");window.dispatchEvent(ev)};$.internal=(url)=>{if(!url)return false;if(typeof url==="object")url=url.href;if(url==="")return true;return url.substring(0,rootUrl.length)===rootUrl||!url.iO(":")};let rootUrl=location.origin,api=window.history&&window.history.pushState&&window.history.replaceState,docType=/<\!DOCTYPE[^>]*>/i,tagso=/<(html|head|link)([\s\>])/gi,tagsod=/<(body)([\s\>])/gi,tagsc=/<\/(html|head|body|link)\>/gi,div12='<div class="ajy-$1"$2',divid12='<div id="ajy-$1"$2',linki='<link rel="stylesheet" type="text/css" href="*" />',linkr='link[href*="!"]',scrr='script[src*="!"]',inlineclass="ajy-inline";let doc=document,bdy,qa=(s,o=doc)=>o.querySelectorAll(s),qs=(s,o=doc)=>o.querySelector(s);function _copyAttributes(el,$S,flush){if(flush)[...el.attributes].forEach((e)=>el.removeAttribute(e.name));[...$S.attributes].forEach((e)=>el.setAttribute(e.nodeName,e.nodeValue))}function _on(eventName,elementSelector,handler,el=document){el.addEventListener(eventName,function(e){for(var target=e.target;target&&target!=this;target=target.parentNode){if(target.matches(elementSelector)){handler(target,e);break}}},!!eventName.iO("mo"))}function Hints(hints){if(!(this instanceof Hints))return new Hints(hints);this.myHints=typeof hints==="string"&&hints.length>0?hints.split(", "):false}Hints.prototype.find=function(t){return!t||!this.myHints?false:this.myHints.some((h)=>t.iO(h))};function lg(m){$.s.verbosity&&console&&console.log(m)}class Cache{constructor(){let d=false;this.a=function(o){if(!o)return d;if(typeof o==="string"){if(o==="f"){$.pages("f");lg("Cache flushed")}else d=$.pages($.memory(o));return d}if(typeof o==="object"){d=o;return d}}}}class Memory{constructor(options){this.a=function(h){if(!h||$.s.memoryoff===true)return false;if($.s.memoryoff===false)return h;return Hints($.s.memoryoff).find(h)?false:h}}}class Pages{constructor(){let d=[],i=-1;this.a=function(h){if(typeof h==="string"){if(h==="f")d=[];else if((i=_iPage(h))!==-1)return d[i][1]}if(typeof h==="object"){if((i=_iPage(h))===-1)d.push(h);else d[i]=h}if(typeof h==="boolean")return false};let _iPage=(h)=>d.findIndex((e)=>e[0]==h)}}class GetPage{constructor(){let rsp=0,cb=0,plus=0,rt="",ct=0,rc=0,ac=0;this.a=function(o,p,p2){if(!o)return $.cache();if(o.iO("/")){cb=p;if(plus==o)return;return _lPage(o)}if(o==="+"){plus=p;cb=p2;return _lPage(p,true)}if(o==="a"){if(rc>0){_cl();ac.abort()}return}if(o==="s")return(rc?1:0)+rt;if(o==="-")return _lSel(p);if(o==="x")return rsp;if(!$.cache())return;if(o==="body")return qs("#ajy-"+o,$.cache());if(o==="script")return qa(o,$.cache());return qs(o==="title"?o:".ajy-"+o,$.cache())};let _lSel=($t)=>($.pass++,_lEls($t),qa("body > script").forEach((e)=>e.classList.contains(inlineclass)?e.parentNode.removeChild(e):false),$.scripts(true),$.scripts("s"),$.scripts("c")),_lPage=(h,pre)=>{if(h.iO("#"))h=h.split("#")[0];if($.Rq("is")||!$.cache(h))return _lAjax(h,pre);plus=0;if(cb)return cb()},_ld=($t,$h)=>{if(!$h){lg("Inserting placeholder for ID: "+$t.getAttribute("id"));var tagN=$t.tagName.toLowerCase();$t.parentNode.replaceChild($.parse("<"+tagN+" id='"+$t.getAttribute("id")+"'></"+tagN+">"),$t);return}var $c=$h.cloneNode(true);qa("script",$c).forEach((e)=>e.parentNode.removeChild(e));_copyAttributes($t,$c,true);$t.innerHTML=$c.innerHTML},_lEls=($t)=>$.cache()&&!_isBody($t)&&$t.forEach(function($el){_ld($el,qs("#"+$el.getAttribute("id"),$.cache()))}),_isBody=($t)=>$t[0].tagName.toLowerCase()=="body"&&(_ld(bdy,qs("#ajy-body",$.cache())),1),_lAjax=(hin,pre)=>{var ispost=$.Rq("is");if(pre)rt="p";else rt="c";ac=new AbortController();rc++;fetch(hin,{method:ispost?"POST":"GET",cache:"default",mode:"same-origin",headers:{"X-Requested-With":"XMLHttpRequest",},body:ispost?$.Rq("d"):null,signal:ac.signal,}).then((r)=>{if(!r.ok||!_isHtml(r)){if(!pre){location.href=hin;_cl();$.pronto(0,$.currentURL)}return}rsp=r;return r.text()}).then((r)=>{_cl(1);if(!r)return;rsp.responseText=r;return _cache(hin,r)}).catch((err)=>{if(err.name==="AbortError")return;try{$.trigger("error",err);lg("Response text : "+err.message);return _cache(hin,err.message,err)}catch(e){}}).finally(()=>rc--)},_cl=(c)=>((plus=0),!c?(cb=0):0),_cache=(href,h,err)=>$.cache($.parse(_parseHTML(h)))&&($.pages([href,$.cache()]),1)&&cb&&cb(err),_isHtml=(x)=>(ct=x.headers.get("content-type"))&&(ct.iO("html")||ct.iO("form-")),_parseHTML=(h)=>(document.createElement("html").innerHTML=_replD(h).trim()),_replD=(h)=>String(h).replace(docType,"").replace(tagso,div12).replace(tagsod,divid12).replace(tagsc,"</div>")}}class Scripts{constructor(){let $s=false,txt=0;this.a=function(o){if(o==="i"){if(!$s)$s={};return true}if(o==="s")return _allstyle($s.y);if(o==="1"){$.detScripts($s);return _addScripts($s)}if(o==="c")return $.s.canonical&&$s.can?$s.can.getAttribute("href"):false;if(o==="d")return $.detScripts($s);if(o&&typeof o=="object")return _onetxt(o);if($.scripts("d"))return;_addScripts($s)};let _allstyle=($s)=>!$.s.style||!$s||(qa("style",qs("head")).forEach((e)=>e.parentNode.removeChild(e)),$s.forEach((el)=>_addstyle(el.textContent))),_onetxt=($s)=>!(txt=$s.textContent).iO(").ajaxify(")&&!txt.iO("new Ajaxify(")&&(($.s.inline&&!Hints($.s.inlineskip).find(txt))||$s.classList.contains("ajaxy")||Hints($.s.inlinehints).find(txt))&&_addtxt($s),_addtxt=($s)=>{if(!txt||!txt.length)return;if($.s.inlineappend||($s.getAttribute("type")&&!$s.getAttribute("type").iO("text/javascript")))try{return _apptxt($s)}catch(e){}try{eval(txt)}catch(e1){lg("Error in inline script : "+txt+"\nError code : "+e1)}},_apptxt=($s)=>{let sc=document.createElement("script");_copyAttributes(sc,$s);sc.classList.add(inlineclass);try{sc.appendChild(document.createTextNode($s.textContent))}catch(e){sc.text=$s.textContent}return qs("body").appendChild(sc)},_addstyle=(t)=>qs("head").appendChild($.parse("<style>"+t+"</style>")),_addScripts=($s)=>($.addAll($s.c,"href"),$.s.inlinesync?setTimeout(()=>$.addAll($s.j,"src")):$.addAll($s.j,"src"))}}class DetScripts{constructor(){let head=0,lk=0,j=0;this.a=function($s){head=$.pass?$.fn("head"):qs("head");if(!head)return true;lk=qa($.pass?".ajy-link":"link",head);j=$.pass?$.fn("script"):qa("script");$s.c=_rel(lk,"stylesheet");$s.y=qa("style",head);$s.can=_rel(lk,"canonical");$s.j=j};let _rel=(lk,v)=>Array.prototype.filter.call(lk,(e)=>e.getAttribute("rel").iO(v))}}class AddAll{constructor(){let $scriptsO=[],$sCssO=[],$sO=[],PK=0,url=0;this.a=function($this,pk){if(!$this.length)return;if($.s.deltas==="n")return true;PK=pk;if(!$.s.deltas)return _allScripts($this);$scriptsO=PK=="href"?$sCssO:$sO;if(!$.pass)_newArray($this);else $this.forEach(function(s){var $t=s;url=$t.getAttribute(PK);if(_classAlways($t)){_removeScript();_iScript($t);return}if(url){if(!$scriptsO.some((e)=>e==url)){$scriptsO.push(url);_iScript($t)}return}if(PK!="href"&&!$t.classList.contains("no-ajaxy"))$.scripts($t)})};let _allScripts=($t)=>$t.forEach((e)=>_iScript(e)),_newArray=($t)=>$t.forEach((e)=>(url=e.getAttribute(PK))?$scriptsO.push(url):0),_classAlways=($t)=>$t.getAttribute("data-class")=="always"||Hints($.s.alwayshints).find(url),_iScript=($S)=>{url=$S.getAttribute(PK);if(PK=="href")return qs("head").appendChild($.parse(linki.replace("*",url)));if(!url)return $.scripts($S);var sc=document.createElement("script");sc.async=$.s.asyncdef;_copyAttributes(sc,$S);qs("head").appendChild(sc)},_removeScript=()=>qa((PK=="href"?linkr:scrr).replace("!",url)).forEach((e)=>e.parentNode.removeChild(e))}}class RQ{constructor(){let ispost=0,data=0,push=0,can=0,e=0,c=0,h=0,l=false;this.a=function(o,p,t){if(o==="="){if(p)return(h===$.currentURL||h===l);return h===$.currentURL}if(o==="!")return(l=h);if(o==="?"){let xs=$.fn("s");if(!xs.iO("0")&&!p)$.fn("a");if(xs==="1c"&&p)return false;if(xs==="1p"&&p)$.s.memoryoff?$.fn("a"):1;return true}if(o==="v"){if(!p)return false;_setE(p,t);if(!$.internal(h))return false;o="i"}if(o==="i"){ispost=false;data=null;push=true;can=false;return h}if(o==="h"){if(p){if(typeof p==="string")e=0;h=p.href?p.href:p}return h}if(o==="e"){if(p)_setE(p,t);return e?e:h}if(o==="p"){if(p!==undefined)push=p;return push}if(o==="is"){if(p!==undefined)ispost=p;return ispost}if(o==="d"){if(p)data=p;return data}if(o==="C"){if(p!==undefined)can=p;return can}if(o==="c")return can&&can!==p&&!p.iO("#")&&!p.iO("?")?can:p};let _setE=(p,t)=>(h=typeof(e=p)!=="string"?(e.currentTarget&&e.currentTarget.href)||(t&&t.href)||e.currentTarget.action||e.originalEvent.state.url:e)}}class Frms{constructor(){let fm=0,divs=0;this.a=function(o,p){if(!$.s.forms||!o)return;if(o==="d")divs=p;if(o==="a")divs.forEach((div)=>{Array.prototype.filter.call(qa($.s.forms,div),function(e){let c=e.getAttribute("action");return $.internal(c&&c.length>0?c:$.currentURL)}).forEach((frm)=>{frm.addEventListener("submit",(q)=>{fm=q.target;p=_k();var g="get",m=fm.getAttribute("method");if(m.length>0&&m.toLowerCase()=="post")g="post";var h,a=fm.getAttribute("action");if(a&&a.length>0)h=a;else h=$.currentURL;$.Rq("v",q);if(g=="get")h=_b(h,p);else{$.Rq("is",true);$.Rq("d",p)}$.trigger("submit",h);$.pronto(0,{href:h,});q.preventDefault();return false})})})};let _k=()=>{let o=new FormData(fm),n=qs("input[name][type=submit]",fm);if(n)o.append(n.getAttribute("name"),n.value);return o},_b=(m,n)=>{let s="";if(m.iO("?"))m=m.substring(0,m.iO("?"));for(var[k,v]of n.entries())s+=`${k}=${encodeURIComponent(v)}&`;return`${m}?${s.slice(0,-1)}`}}}class Offsets{constructor(){let d=[],i=-1;this.a=function(h){if(typeof h==="string"){h=h.iO("?")?h.split("?")[0]:h;i=_iOffset(h);if(i===-1)return 0;return d[i][1]}var u=$.currentURL,us1=u.iO("?")?u.split("?")[0]:u,us=us1.iO("#")?us1.split("#")[0]:us1,os=[us,(document.documentElement&&document.documentElement.scrollTop)||document.body.scrollTop,];i=_iOffset(us);if(i===-1)d.push(os);else d[i]=os};let _iOffset=(h)=>d.findIndex((e)=>e[0]==h)}}class Scrolly{constructor(){this.a=function(o){if(!o)return;var op=o;if(o==="+"||o==="!")o=$.currentURL;if(op!=="+"&&o.iO("#")&&o.iO("#")<o.length-1){let $el=qs("#"+o.split("#")[1]);if(!$el)return;let box=$el.getBoundingClientRect();_scrll(box.top+window.pageYOffset-document.documentElement.clientTop);return}if($.s.scrolltop==="s"){if(op==="+")$.offsets();if(op==="!")_scrll($.offsets(o));return}if(op!=="+"&&$.s.scrolltop)_scrll(0)};let _scrll=(o)=>window.scrollTo(0,o)}}class HApi{constructor(){this.a=function(o,p){if(!o)return;if(p)$.currentURL=p;if(o==="=")history.replaceState({url:$.currentURL,},"state-"+$.currentURL,$.currentURL);else if($.currentURL!==window.location.href)history.pushState({url:$.currentURL,},"state-"+$.currentURL,$.currentURL)}}}class Pronto{constructor(){let $gthis=0,requestTimer=0,pd=150,ptim=0;this.a=function($this,h){if(!h)return;_noAjaxy();if(h==="i"){bdy=document.body;if(!$this.length)$this="body";$gthis=qa($this);$.frms=new Frms().a;if($.s.idleTime)$.slides=new classSlides($).a;$.scrolly=new Scrolly().a;$.offsets=new Offsets().a;$.hApi=new HApi().a;_init_p();return $this}if(typeof h==="object"){$.Rq("h",h);_request();return}if(h.iO("/")){$.Rq("h",h);_request(true)}};let _init_p=()=>{$.hApi("=",window.location.href);window.addEventListener("popstate",_onPop);if($.s.prefetchoff!==true){_on("mouseenter",$.s.selector,_preftime);_on("mouseleave",$.s.selector,_prefstop);_on("touchstart",$.s.selector,_prefetch)}_on("click",$.s.selector,_click,bdy);$.frms("d",qa("body"));$.frms("a");$.frms("d",$gthis);if($.s.idleTime)$.slides("i")},_noAjaxy=()=>{const selectors=typeof $.s.selectorskip==="string"&&$.s.selectorskip.length>0?$.s.selectorskip.split(", "):false;if(selectors&&selectors.length){selectors.forEach((elem)=>{qa(elem.trim()).forEach((e)=>{if(!e.classList.contains("no-ajaxy")){e.classList.add("no-ajaxy")}})})}},_preftime=(t,e)=>(ptim=setTimeout(()=>_prefetch(t,e),pd)),_prefstop=()=>clearTimeout(ptim),_prefetch=(t,e)=>{if($.s.prefetchoff===true)return;if(!$.Rq("?",true))return;var href=$.Rq("v",e,t);if($.Rq("=",true)||!href||Hints($.s.prefetchoff).find(href))return;$.fn("+",href,()=>false)},_stopBubbling=(e)=>(e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation()),_click=(t,e,notPush)=>{if(!$.Rq("?"))return;var href=$.Rq("v",e,t);if(!href||_exoticKey(t))return;if(href.substr(-1)==="#")return true;if(_hashChange()){$.hApi("=",href);return true}$.scrolly("+");_stopBubbling(e);if($.Rq("="))$.hApi("=");if($.s.refresh||!$.Rq("="))_request(notPush)},_request=(notPush)=>{if($.s.beforeRender)$.s.beforeRender();$.Rq("!");if(notPush)$.Rq("p",false);$.trigger("request");$.fn($.Rq("h"),(err)=>{if(err){lg("Error in _request : "+err);$.trigger("error",err)}_render()})},_render=()=>{$.trigger("beforeload");if($.s.requestDelay){if(requestTimer)clearTimeout(requestTimer);requestTimer=setTimeout(_doRender,$.s.requestDelay)}else _doRender()},_onPop=(e)=>{var url=window.location.href;$.Rq("i");$.Rq("h",url);$.Rq("p",false);$.scrolly("+");if(!url||url===$.currentURL)return;$.trigger("request");$.fn(url,_render)},_doRender=()=>{$.trigger("load");if($.s.bodyClasses){var classes=$.fn("body").getAttribute("class");bdy.setAttribute("class",classes?classes:"")}var href=$.Rq("h"),title;href=$.Rq("c",href);$.hApi($.Rq("p")?"+":"=",href);if((title=$.fn("title")))qs("title").innerHTML=title.innerHTML;$.Rq("C",$.fn("-",$gthis));$.frms("a");$.scrolly("!");_gaCaptureView(href);$.trigger("render");_noAjaxy();if($.s.passCount)qs("#"+$.s.passCount).innerHTML="Pass: "+$.pass;if($.s.cb)$.s.cb();if($.s.afterRender)$.s.afterRender()},_gaCaptureView=(href)=>{href="/"+href.replace(rootUrl,"");if(typeof window.ga!=="undefined")window.ga("send","pageview",href);else if(typeof window._gaq!=="undefined")window._gaq.push(["_trackPageview",href])},_exoticKey=(t)=>{var href=$.Rq("h"),e=$.Rq("e"),tgt=e.currentTarget.target||t.target;return(e.which>1||e.metaKey||e.ctrlKey||e.shiftKey||e.altKey||tgt==="_blank"||href.iO("wp-login")||href.iO("wp-admin"))},_hashChange=()=>{var e=$.Rq("e");return((e.hash&&e.href.replace(e.hash,"")===window.location.href.replace(location.hash,""))||e.href===window.location.href+"#")}}}$.init=()=>{let o=options;if(!o||typeof o!=="string"){if(document.readyState==="complete"||(document.readyState!=="loading"&&!document.documentElement.doScroll))run();else document.addEventListener("DOMContentLoaded",run);return $}else return $.pronto(0,o)};let run=()=>{$.s=Object.assign($.s,options);$.pages=new Pages().a;$.pronto=new Pronto().a;if(load()){$.pronto($.s.elements,"i");if($.s.deltas)$.scripts("1")}},load=()=>{if(!api||!$.s.pluginon){lg("Gracefully exiting...");return false}lg("Ajaxify loaded...");$.scripts=new Scripts().a;$.scripts("i");$.cache=new Cache().a;$.memory=new Memory().a;$.fn=$.getPage=new GetPage().a;$.detScripts=new DetScripts().a;$.addAll=new AddAll().a;$.Rq=new RQ().a;return true};$.init()}}